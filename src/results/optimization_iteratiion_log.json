[
  {
    "iteration": 0,
    "current_prompt_template": "You are a Financial Services Assistant. Classify each customer inquiry into one of these categories:\nACKNOWLEDGMENT - For greetings and thanks\nPASSWORD_RESET - For password issues\nCONTACT_INFO_UPDATE - For updating contact information\nPIN_RESET - For PIN number issues\nTRANSACTION_STATUS - For questions about pending transactions\nAUTHENTICATION_SETUP - For setting up security features\nCARD_DISPUTE - For unauthorized charges or transaction problems\nESCALATION - For security issues and complex problems\nIN_SCOPE - For questions about our financial services\nOUT_OF_SCOPE - For unrelated topics\n\n### User Inquiry:\n${user_question}. Output format: Please output directly in json Output format: Respond with a JSON object containing two fields - \"prediction\" with the category name, and \"explanation\" with your reasoning for the classification. When you output JSON, ALWAYS start with ```json",
    "success_rate": 60.0,
    "feedback": "# Classification Performance Analysis\n\n## STEP 1 - Error Pattern Analysis\nThe misclassified cases reveal several clear patterns:\n\n1. **Misclassification of ESCALATION cases (5 instances)**\n   - Cases #6, #8, #10, #13, #14: Security issues and complex problems were incorrectly categorized as CARD_DISPUTE, CONTACT_INFO_UPDATE, or IN_SCOPE\n\n2. **IN_SCOPE vs. specific categories confusion (4 instances)**\n   - Cases #3, #16, #18, #22: General financial service questions were incorrectly classified as specific transaction types\n\n3. **Multiple issues in single query (1 instance)**\n   - Case #1: Query containing both PIN reset and contact info update was classified as \"MULTI_ISSUE\" despite this not being a valid category\n\n## STEP 2 - Prompt-Specific Root Cause Investigation\n\n1. **Unclear ESCALATION criteria:**\n   - Current description (\"For security issues and complex problems\") is too vague\n   - No guidance on what constitutes a security issue requiring escalation\n   - No explanation for identifying \"complex problems\"\n\n2. **Ambiguous category boundaries:**\n   - Overlap between IN_SCOPE and specific categories\n   - CARD_DISPUTE definition (\"unauthorized charges or transaction problems\") is too broad\n   - No hierarchical relationship established between general and specific categories\n\n3. **No multi-issue handling instructions:**\n   - No guidance on prioritizing issues when multiple appear in one query\n   - \"MULTI_ISSUE\" appears in predictions despite not being in the classification scheme\n\n4. **Missing context for special cases:**\n   - No mention of how to handle queries involving deceased account holders\n   - Insufficient guidance for identifying security breaches\n\n5. **Format inconsistencies:**\n   - JSON output format instruction is included within the template text\n   - No explicit instruction to select exactly one category\n\n## STEP 3 - Historical Context\nNo suggestion history was provided, so unable to analyze previous iterations.\n\n## STEP 4 - Prompt Improvement Ideas\n\n<suggestion>\nYou are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For security breaches, account compromise, urgent time-sensitive issues, complex problems requiring manager intervention, or situations involving deceased account holders\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. If the inquiry involves ANY security concern or account compromise, classify as ESCALATION\n2. If the inquiry involves multiple issues, classify based on the most urgent/critical issue\n3. If the customer expresses urgency or dissatisfaction requiring manager attention, classify as ESCALATION\n4. Only use IN_SCOPE when the inquiry relates to financial services but doesn't fit any specific category\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.\n</suggestion>",
    "improved_result": {
      "root_cause": "The misclassification of ESCALATION cases and confusion between IN_SCOPE and specific categories were due to unclear criteria and ambiguous category boundaries. Additionally, there were no instructions for handling multiple issues within a single query, and format inconsistencies were present.",
      "improved_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For security breaches, account compromise, urgent time-sensitive issues, complex problems requiring manager intervention, or situations involving deceased account holders\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. If the inquiry involves ANY security concern or account compromise, classify as ESCALATION\n2. If the inquiry involves multiple issues, classify based on the most urgent/critical issue\n3. If the customer expresses urgency or dissatisfaction requiring manager attention, classify as ESCALATION\n4. Only use IN_SCOPE when the inquiry relates to financial services but doesn't fit any specific category\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```."
    }
  },
  {
    "iteration": 1,
    "current_prompt_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For security breaches, account compromise, urgent time-sensitive issues, complex problems requiring manager intervention, or situations involving deceased account holders\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. If the inquiry involves ANY security concern or account compromise, classify as ESCALATION\n2. If the inquiry involves multiple issues, classify based on the most urgent/critical issue\n3. If the customer expresses urgency or dissatisfaction requiring manager attention, classify as ESCALATION\n4. Only use IN_SCOPE when the inquiry relates to financial services but doesn't fit any specific category\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.",
    "success_rate": 76.0,
    "feedback": "# Classification Performance Analysis\n\n## STEP 1 - Error Pattern Analysis\n\nAnalyzing the misclassified cases reveals several clear patterns:\n\n1. **Over-classification as ESCALATION** (Cases #1, #18, #21, #22)\n   - Simple requests with multiple components (like PIN reset + contact update) are incorrectly escalated\n   - Standard requests with urgency language trigger escalation unnecessarily\n\n2. **Under-classification of ESCALATION** (Case #14)\n   - Identity verification failures combined with legal name changes should be escalated but weren't\n\n3. **Confusion between IN_SCOPE and specific categories** (Cases #3, #22)\n   - Application status inquiries classified as TRANSACTION_STATUS instead of IN_SCOPE\n   - Fee disputes with access issues classified as ESCALATION instead of IN_SCOPE\n\n## STEP 2 - Prompt-Specific Root Cause Investigation\n\n1. **Ambiguous ESCALATION criteria**:\n   - Current rule \"If the inquiry involves ANY security concern\" is too broad and vague\n   - \"Complex problems requiring manager intervention\" lacks concrete examples\n   - No clear distinction between urgent issues and true security breaches\n\n2. **Insufficient guidance for multi-issue inquiries**:\n   - Rule #2 states to \"classify based on the most urgent/critical issue\" but doesn't define what makes an issue urgent\n   - No explicit hierarchy of which issues take precedence when multiple are present\n\n3. **Unclear boundaries between categories**:\n   - TRANSACTION_STATUS vs. IN_SCOPE for non-monetary transactions (like applications)\n   - When authentication issues warrant ESCALATION vs. PASSWORD_RESET/AUTHENTICATION_SETUP\n\n4. **Missing context for specific scenarios**:\n   - No guidance on how to classify identity-related verification failures\n   - Insufficient clarity on fee disputes and how to categorize them\n\n## STEP 3 - Historical Context\n\nThe previous iteration added:\n- Clear category definitions\n- Classification priority rules\n- Explicit instruction to select exactly one category\n- JSON output format requirements\n\nThese were effective improvements, but issues persist with:\n- Over-escalation of multi-issue inquiries\n- Lack of clarity around what constitutes a true security concern\n- Insufficient guidance on prioritizing issues\n\n## STEP 4 - Prompt Improvement Ideas\n\n<suggestion>\nYou are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues = CONTACT_INFO_UPDATE (unless clear evidence of identity theft)\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.\n</suggestion>",
    "improved_result": {
      "root_cause": "The current template suffers from over-classification and under-classification of ESCALATION cases, ambiguous criteria for escalation, insufficient guidance for multi-issue inquiries, unclear boundaries between categories, and missing context for specific scenarios. The prompt needs clearer definitions, more specific escalation criteria, a defined hierarchy for multi-issue inquiries, and better distinctions between categories.",
      "improved_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues = CONTACT_INFO_UPDATE (unless clear evidence of identity theft)\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```."
    }
  },
  {
    "iteration": 2,
    "current_prompt_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues = CONTACT_INFO_UPDATE (unless clear evidence of identity theft)\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.",
    "success_rate": 84.0,
    "feedback": "# Classification Performance Analysis\n\n## STEP 1 - Error Pattern Analysis\nI identified 4 misclassified cases with clear patterns:\n\n1. **Failure to recognize potential fraud/security breaches as ESCALATION** (Case #4)\n   - Unauthorized ATM withdrawal attempts while customer had physical card were classified as CARD_DISPUTE rather than ESCALATION\n\n2. **Misinterpreting urgent access issues** (Case #6)\n   - Card eaten by ATM with urgent need for funds was classified as PIN_RESET, missing the urgency requiring ESCALATION\n\n3. **Missing identity verification red flags** (Case #14)\n   - Verification failures with legal name change was classified as CONTACT_INFO_UPDATE instead of ESCALATION\n\n4. **Over-escalation of fee dispute** (Case #22)\n   - Account lockout after disputing a fee was classified as ESCALATION when it should have been IN_SCOPE\n\n## STEP 2 - Prompt-Specific Root Cause Investigation\n\nFor each error pattern:\n\n1. **Security breach recognition**\n   - Current ESCALATION criteria focus on \"clear evidence\" but don't specify that unusual account access patterns (like ATM attempts while traveling) should trigger escalation\n   - No explicit mention that attempted fraud (even without successful transactions) warrants escalation\n\n2. **Urgent access evaluation**\n   - The prompt lacks guidelines for distinguishing between routine PIN issues and truly urgent access problems\n   - No mention that physical card retention by ATMs with urgent need might require escalation\n\n3. **Identity verification issues**\n   - The \"clear evidence of identity theft\" exception for CONTACT_INFO_UPDATE is mentioned, but verification failures with name changes aren't specifically addressed\n   - No guidance on when identity verification failures indicate potential fraud\n\n4. **Fee disputes with access issues**\n   - Current rules state \"Fee disputes without fraud = IN_SCOPE,\" but don't clarify that account lockouts during fee disputes don't automatically indicate fraud\n\n## STEP 3 - Historical Context\n\nThe prompt has evolved significantly:\n- Initial iterations added category definitions and basic priority rules\n- Later iterations added specific ESCALATION criteria and multi-issue handling protocols\n- Most recent version added detailed clarifications for common confusion points\n\nEffective changes:\n- Adding specific criteria for ESCALATION has generally improved classification\n- The multi-issue priority order has been beneficial\n- Common confusion clarifications have helped with boundary cases\n\nPersistent issues:\n- Security breach identification remains inconsistent\n- Urgency evaluation still lacks sufficient clarity\n- Identity verification failure guidelines need refinement\n\n## STEP 4 - Prompt Improvement Ideas\n\n<suggestion>\nYou are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change)\n   - Multiple failed authentication attempts that could indicate targeted fraud\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless clear evidence of fraud)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues = CONTACT_INFO_UPDATE (unless combined with identity changes or suspicious patterns)\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.\n</suggestion>",
    "improved_result": {
      "root_cause": "The current template has issues with recognizing potential fraud/security breaches, misinterpreting urgent access issues, missing identity verification red flags, and over-escalating fee disputes. Specifically, it fails to identify unusual account access patterns, urgent access needs, verification failures with identity changes, and distinguishes between fee disputes and fraud-related access issues inadequately.",
      "improved_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change)\n   - Multiple failed authentication attempts that could indicate targeted fraud\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless clear evidence of fraud)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues = CONTACT_INFO_UPDATE (unless combined with identity changes or suspicious patterns)\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```."
    }
  },
  {
    "iteration": 3,
    "current_prompt_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change)\n   - Multiple failed authentication attempts that could indicate targeted fraud\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless clear evidence of fraud)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues = CONTACT_INFO_UPDATE (unless combined with identity changes or suspicious patterns)\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.",
    "success_rate": 92.0,
    "feedback": "# Classification Performance Analysis\n\n## STEP 1 - Error Pattern Analysis\n\nI've identified two key misclassifications in the evaluation results:\n\n1. **Case #14** - Verification failure with legal name change\n   - Ground truth: ESCALATION\n   - Model prediction: CONTACT_INFO_UPDATE\n   - Error type: Under-escalation - Failed to recognize the verification failure combined with identity change as meeting escalation criteria\n\n2. **Case #22** - Fee dispute with account lockout\n   - Ground truth: IN_SCOPE\n   - Model prediction: ESCALATION\n   - Error type: Over-escalation - Incorrectly interpreted account lockout during fee dispute as potential fraud\n\nThe current template is highly effective overall with a 92% accuracy rate (23/25 correct), but these specific edge cases reveal areas for improvement.\n\n## STEP 2 - Prompt-Specific Root Cause Investigation\n\nFor Case #14:\n- Despite the prompt explicitly listing \"Verification failures combined with recent identity changes (marriage, legal name change)\" as escalation criteria, the model didn't correctly apply this rule\n- The instruction may not be prominent enough or may not clearly distinguish between routine verification issues and those warranting escalation\n- The explanation shows the model recognized the name change but didn't connect it with the verification failure as an escalation trigger\n\nFor Case #22:\n- The prompt includes \"Account lockouts after disputing fees = IN_SCOPE (unless clear evidence of fraud)\" but the model still misclassified\n- The model's explanation reveals it interpreted the combination of unrecognized fee and subsequent lockout as potential fraud/compromise\n- The term \"clear evidence of fraud\" lacks concrete examples, leaving room for interpretation\n\n## STEP 3 - Historical Context\n\nThe prompt has evolved significantly through iterations:\n- Initial versions had vague category definitions and minimal guidance\n- Later versions added specific escalation criteria and multi-issue handling\n- The current template incorporates detailed confusion clarifications and specific examples\n\nEffective changes:\n- Adding explicit escalation criteria with specific scenarios\n- Introducing a clear priority order for multi-issue inquiries\n- Including common confusions with specific guidance\n\nRemaining issues:\n- Some criteria are still subject to interpretation\n- Important escalation triggers could be more prominent\n- Some rule applications require more explicit examples\n\n## STEP 4 - Prompt Improvement Ideas\n\n<suggestion>\nYou are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change) - THIS ALWAYS REQUIRES ESCALATION\n   - Multiple failed authentication attempts that could indicate targeted fraud\n   - Time-sensitive urgent access needs where financial hardship may result\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless there's additional evidence of fraud beyond the lockout itself)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues:\n     * If ONLY verification is failing = CONTACT_INFO_UPDATE\n     * If verification fails AND customer mentions recent name/identity change = ESCALATION\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### Examples of what is NOT clear evidence of fraud:\n- Standard verification failures without suspicious patterns\n- Account lockouts during routine activities\n- Unrecognized fees without other suspicious activity\n- Simple access problems to online services\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.\n</suggestion>",
    "improved_result": {
      "root_cause": "The current template, while effective with a 92% accuracy rate, has specific edge cases that lead to misclassifications. Case #14 involved a verification failure with a legal name change, which should have been classified as ESCALATION but was misclassified as CONTACT_INFO_UPDATE due to under-escalation. Case #22 involved a fee dispute with an account lockout, incorrectly classified as ESCALATION instead of IN_SCOPE due to over-escalation. These errors suggest that some escalation criteria are not sufficiently prominent or clearly distinguished from routine issues, and certain terms like 'clear evidence of fraud' lack concrete examples, leading to misinterpretation.",
      "improved_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change) - THIS ALWAYS REQUIRES ESCALATION\n   - Multiple failed authentication attempts that could indicate targeted fraud\n   - Time-sensitive urgent access needs where financial hardship may result\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless there's additional evidence of fraud beyond the lockout itself)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues:\n     * If ONLY verification is failing = CONTACT_INFO_UPDATE\n     * If verification fails AND customer mentions recent name/identity change = ESCALATION\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### Examples of what is NOT clear evidence of fraud:\n- Standard verification failures without suspicious patterns\n- Account lockouts during routine activities\n- Unrecognized fees without other suspicious activity\n- Simple access problems to online services\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```."
    }
  },
  {
    "iteration": 4,
    "current_prompt_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change) - THIS ALWAYS REQUIRES ESCALATION\n   - Multiple failed authentication attempts that could indicate targeted fraud\n   - Time-sensitive urgent access needs where financial hardship may result\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless there's additional evidence of fraud beyond the lockout itself)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues:\n     * If ONLY verification is failing = CONTACT_INFO_UPDATE\n     * If verification fails AND customer mentions recent name/identity change = ESCALATION\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### Examples of what is NOT clear evidence of fraud:\n- Standard verification failures without suspicious patterns\n- Account lockouts during routine activities\n- Unrecognized fees without other suspicious activity\n- Simple access problems to online services\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.",
    "success_rate": 100.0,
    "feedback": "# Classification Performance Analysis\n\n## STEP 1 - Error Pattern Analysis\nAfter reviewing the evaluation results, I did not find any misclassified cases. The current prompt is performing at 100% accuracy on this test set, with all 25 cases correctly classified according to the ground truth.\n\n## STEP 2 - Prompt-Specific Root Cause Investigation\nSince there are no misclassifications, I'll analyze what's working well in the current prompt structure:\n\n1. **Clear ESCALATION criteria** - The detailed list with specific scenarios has eliminated ambiguity\n2. **Hierarchical multi-issue handling** - The priority order for handling multiple issues is effective\n3. **Explicit handling instructions** for edge cases - Especially verification failures with name changes\n4. **Clear negative examples** - The \"what is NOT clear evidence of fraud\" section helps prevent over-escalation\n\n## STEP 3 - Historical Context\nThe prompt has evolved effectively through multiple iterations:\n\n- **Iteration 0-1**: Established initial category definitions and basic priority rules\n- **Iteration 2**: Added specific ESCALATION criteria and multi-issue handling protocols\n- **Iteration 3**: Refined edge cases with emphasis on verification failures with identity changes\n\nMost effective improvements:\n- Adding \"THIS ALWAYS REQUIRES ESCALATION\" for verification failures with identity changes\n- Creating clear distinctions between routine issues and those requiring escalation\n- Adding examples of what is NOT evidence of fraud\n- Clear formatting with bullet points and hierarchical structure\n\n## STEP 4 - Prompt Improvement Ideas\n\nAlthough the current prompt achieves perfect accuracy on the test set, I can suggest a few refinements to improve clarity and efficiency:\n\n<suggestion>\nYou are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change) - THIS ALWAYS REQUIRES ESCALATION\n   - Multiple failed authentication attempts that could indicate targeted fraud\n   - Time-sensitive urgent access needs where financial hardship may result\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless there's additional evidence of fraud beyond the lockout itself)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues:\n     * If ONLY verification is failing = CONTACT_INFO_UPDATE\n     * If verification fails AND customer mentions recent name/identity change = ESCALATION\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### Examples of what is NOT clear evidence of fraud:\n- Standard verification failures without suspicious patterns\n- Account lockouts during routine activities\n- Unrecognized fees without other suspicious activity\n- Simple access problems to online services\n\n### Decision Process:\n1. First, check if the inquiry meets ANY of the ESCALATION criteria\n2. If not escalation, determine if it involves unauthorized transactions (CARD_DISPUTE)\n3. For routine matters, identify the most specific category (PIN_RESET, PASSWORD_RESET, etc.)\n4. Only use IN_SCOPE when no specific category applies but the inquiry is finance-related\n5. Use OUT_OF_SCOPE only for completely unrelated topics or unintelligible messages\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```.\n</suggestion>",
    "improved_result": {
      "root_cause": "The current template is performing at 100% accuracy with no misclassifications. The detailed ESCALATION criteria, hierarchical multi-issue handling, explicit handling instructions for edge cases, and clear negative examples contribute to its effectiveness. The prompt has been refined through iterations to clarify distinctions between routine issues and those requiring escalation, and to provide examples of what is NOT evidence of fraud.",
      "improved_template": "You are a Financial Services Assistant. Classify each customer inquiry into EXACTLY ONE of these categories:\n\nACKNOWLEDGMENT - For simple greetings and expressions of thanks only\nPASSWORD_RESET - For issues accessing online accounts due to forgotten passwords or login problems\nCONTACT_INFO_UPDATE - For updating email, phone number, address, or other personal information\nPIN_RESET - For issues with PIN numbers for cards, including requests for changes or forgotten PINs\nTRANSACTION_STATUS - For questions about specific pending monetary transactions or transfers that have been initiated\nAUTHENTICATION_SETUP - For setting up or troubleshooting security features like fingerprint access, face ID, etc.\nCARD_DISPUTE - ONLY for unauthorized charges or fraudulent transactions the customer did not initiate\nESCALATION - For confirmed security breaches, account compromise, fraud, situations involving deceased account holders, explicit requests for manager intervention, or customers expressing significant distress about financial loss\nIN_SCOPE - For general financial services questions that don't fit other categories, including account fees, product information, application status, and service requests\nOUT_OF_SCOPE - For topics completely unrelated to banking or financial services\n\n### Classification Priority Rules:\n1. ONLY classify as ESCALATION when there is:\n   - Clear evidence of account compromise or fraud (not just access issues)\n   - Explicit mention of unauthorized account changes\n   - Situations involving deceased account holders\n   - Customer explicitly requesting manager intervention\n   - Significant unexplained financial loss requiring immediate attention\n   - Unusual account access patterns (e.g., attempted withdrawals in locations different from where customer claims to be)\n   - Verification failures combined with recent identity changes (marriage, legal name change) - THIS ALWAYS REQUIRES ESCALATION\n   - Multiple failed authentication attempts that could indicate targeted fraud\n   - Time-sensitive urgent access needs where financial hardship may result\n\n2. Multi-issue handling:\n   - For inquiries with multiple issues, use this priority order:\n     a. ESCALATION (if criteria in rule #1 are met)\n     b. CARD_DISPUTE (for unauthorized transactions)\n     c. The most specific applicable category (PIN_RESET, PASSWORD_RESET, etc.)\n     d. IN_SCOPE (as a last resort)\n\n3. Common confusion clarifications:\n   - Application status inquiries = IN_SCOPE (not TRANSACTION_STATUS)\n   - Fee disputes without fraud = IN_SCOPE (not ESCALATION or CARD_DISPUTE) \n   - Account lockouts after disputing fees = IN_SCOPE (unless there's additional evidence of fraud beyond the lockout itself)\n   - Login/access issues = PASSWORD_RESET (unless clear evidence of compromise)\n   - Contact info updates with verification issues:\n     * If ONLY verification is failing = CONTACT_INFO_UPDATE\n     * If verification fails AND customer mentions recent name/identity change = ESCALATION\n   - Urgent access needs (e.g., card eaten by ATM before travel) = ESCALATION when time-sensitive\n   - Failed transaction attempts = CARD_DISPUTE for completed unauthorized transactions, ESCALATION for suspicious patterns of attempted access\n\n### Examples of what is NOT clear evidence of fraud:\n- Standard verification failures without suspicious patterns\n- Account lockouts during routine activities\n- Unrecognized fees without other suspicious activity\n- Simple access problems to online services\n\n### Decision Process:\n1. First, check if the inquiry meets ANY of the ESCALATION criteria\n2. If not escalation, determine if it involves unauthorized transactions (CARD_DISPUTE)\n3. For routine matters, identify the most specific category (PIN_RESET, PASSWORD_RESET, etc.)\n4. Only use IN_SCOPE when no specific category applies but the inquiry is finance-related\n5. Use OUT_OF_SCOPE only for completely unrelated topics or unintelligible messages\n\n### User Inquiry:\n${user_question}\n\n### Output Format: \nRespond with a JSON object containing exactly two fields:\n- \"prediction\": the single most appropriate category name\n- \"explanation\": your reasoning for the classification\n\nYour JSON response must begin with ```json and end with ```."
    }
  }
]